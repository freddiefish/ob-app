<ng-container *ngIf="decisionLocation?.id">

  <h1 mat-dialog-title>

    <ng-container *ngIf="decisionsInThisLocation$ | async; let decisionsInThisLocation">
      <button mat-icon-button
              *ngIf="decisionsInThisLocation?.length > 1"
              [matMenuTriggerFor]="otherDecisions"
              [matMenuTriggerData]="{decisions: decisionsInThisLocation}">
        <mat-icon>keyboard_arrow_down</mat-icon>
      </button>
    </ng-container>

    {{decision?.title}}

    <i style="cursor: pointer" (click)="closeModal();" class="material-icons close-button">close</i>

  </h1>

  

    <app-street-view [position]="{lat: decisionLocation.point.geopoint._lat, lng: decisionLocation.point.geopoint._long}"></app-street-view>

    <ng-container *ngIf="decision">
      
      <p style="text-align: right;">
        {{ decision.groupName }}<br>
        {{decision.date | date: 'dd/MM/yyyy'}} <br>
        <a class="more-info-url"
           *ngIf="decision.published"
           target="_blank"
           href="https://storage.cloud.google.com/ob-app-dev-252415.appspot.com/pubs/_besluit_{{decision.docId}}.pdf">
          full text <i class="material-icons">link</i>
        </a>
      </p>

      <!-- HOW -->
      <h3>Besluit</h3>
      <div *ngIf="!decision.decision.text">
          <p>{{decision.decision.text}}</p>
      </div>
      
      <div *ngFor="let h of decision.decision.headings">
        <h4>{{h.name}}</h4>
        <p>{{h.text}}</p>
      </div>

    </ng-container>


</ng-container>



<mat-menu #otherDecisions="matMenu">

    <ng-template matMenuContent let-decisions="decisions">
  
      <p style=" padding-left: 0.5em; padding-right: 0.5em;">{{decisions?.length && decisions.length - 1}} meer besluiten{{decisions?.length > 2 ? 's' : ''}} op deze locatie:</p>
  
      <ng-container *ngFor="let item of decisions">
  
        <ng-container *ngIf="item.id !== decision.id">
  
          <button mat-menu-item
                  (click)="setDecision(item)">
  
            {{item.date | date}} {{item.title}}
  
          </button>
  
        </ng-container>
  
      </ng-container>
  
    </ng-template>
  
  </mat-menu>
  
  